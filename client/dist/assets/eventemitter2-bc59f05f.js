var b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var y={};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */var x;function O(){return x||(x=1,function(_){(function(m){var d=Array.isArray?Array.isArray:function(i){return Object.prototype.toString.call(i)==="[object Array]"},E=10;function g(){this._events={},this._conf&&A.call(this,this._conf)}function A(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function l(e){this._events={},this.newListener=!1,A.call(this,e)}function o(e,i,t,s){if(!t)return[];var n=[],a,h,r,c,f,w,p,u=i.length,v=i[s],L=i[s+1];if(s===u&&t._listeners){if(typeof t._listeners=="function")return e&&e.push(t._listeners),[t];for(a=0,h=t._listeners.length;a<h;a++)e&&e.push(t._listeners[a]);return[t]}if(v==="*"||v==="**"||t[v]){if(v==="*"){for(r in t)r!=="_listeners"&&t.hasOwnProperty(r)&&(n=n.concat(o(e,i,t[r],s+1)));return n}else if(v==="**"){p=s+1===u||s+2===u&&L==="*",p&&t._listeners&&(n=n.concat(o(e,i,t,u)));for(r in t)r!=="_listeners"&&t.hasOwnProperty(r)&&(r==="*"||r==="**"?(t[r]._listeners&&!p&&(n=n.concat(o(e,i,t[r],u))),n=n.concat(o(e,i,t[r],s))):r===L?n=n.concat(o(e,i,t[r],s+2)):n=n.concat(o(e,i,t[r],s)));return n}n=n.concat(o(e,i,t[v],s+1))}if(c=t["*"],c&&o(e,i,c,s+1),f=t["**"],f)if(s<u){f._listeners&&o(e,i,f,u);for(r in f)r!=="_listeners"&&f.hasOwnProperty(r)&&(r===L?o(e,i,f[r],s+2):r===v?o(e,i,f[r],s+1):(w={},w[r]=f[r],o(e,i,{"**":w},s+1)))}else f._listeners?o(e,i,f,u):f["*"]&&f["*"]._listeners&&o(e,i,f["*"],u);return n}function T(e,i){e=typeof e=="string"?e.split(this.delimiter):e.slice();for(var t=0,s=e.length;t+1<s;t++)if(e[t]==="**"&&e[t+1]==="**")return;for(var n=this.listenerTree,a=e.shift();a;){if(n[a]||(n[a]={}),n=n[a],e.length===0){if(!n._listeners)n._listeners=i;else if(typeof n._listeners=="function")n._listeners=[n._listeners,i];else if(d(n._listeners)&&(n._listeners.push(i),!n._listeners.warned)){var h=E;typeof this._events.maxListeners<"u"&&(h=this._events.maxListeners),h>0&&n._listeners.length>h&&(n._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",n._listeners.length),console.trace())}return!0}a=e.shift()}return!0}l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){this._events||g.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},l.prototype.event="",l.prototype.once=function(e,i){return this.many(e,1,i),this},l.prototype.many=function(e,i,t){var s=this;if(typeof t!="function")throw new Error("many only accepts instances of Function");function n(){--i===0&&s.off(e,n),t.apply(this,arguments)}return n._origin=t,this.on(e,n),s},l.prototype.emit=function(){this._events||g.call(this);var e=arguments[0];if(e==="newListener"&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var i=arguments.length,t=new Array(i-1),s=1;s<i;s++)t[s-1]=arguments[s];for(s=0,i=this._all.length;s<i;s++)this.event=e,this._all[s].apply(this,t)}if(e==="error"&&!this._all&&!this._events.error&&!(this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var n;if(this.wildcard){n=[];var a=typeof e=="string"?e.split(this.delimiter):e.slice();o.call(this,n,a,this.listenerTree,0)}else n=this._events[e];if(typeof n=="function"){if(this.event=e,arguments.length===1)n.call(this);else if(arguments.length>1)switch(arguments.length){case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(var i=arguments.length,t=new Array(i-1),s=1;s<i;s++)t[s-1]=arguments[s];n.apply(this,t)}return!0}else if(n){for(var i=arguments.length,t=new Array(i-1),s=1;s<i;s++)t[s-1]=arguments[s];for(var h=n.slice(),s=0,i=h.length;s<i;s++)this.event=e,h[s].apply(this,t);return h.length>0||!!this._all}else return!!this._all},l.prototype.on=function(e,i){if(typeof e=="function")return this.onAny(e),this;if(typeof i!="function")throw new Error("on only accepts instances of Function");if(this._events||g.call(this),this.emit("newListener",e,i),this.wildcard)return T.call(this,e,i),this;if(!this._events[e])this._events[e]=i;else if(typeof this._events[e]=="function")this._events[e]=[this._events[e],i];else if(d(this._events[e])&&(this._events[e].push(i),!this._events[e].warned)){var t=E;typeof this._events.maxListeners<"u"&&(t=this._events.maxListeners),t>0&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}return this},l.prototype.onAny=function(e){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},l.prototype.addListener=l.prototype.on,l.prototype.off=function(e,i){if(typeof i!="function")throw new Error("removeListener only takes instances of Function");var t,s=[];if(this.wildcard){var n=typeof e=="string"?e.split(this.delimiter):e.slice();s=o.call(this,null,n,this.listenerTree,0)}else{if(!this._events[e])return this;t=this._events[e],s.push({_listeners:t})}for(var a=0;a<s.length;a++){var h=s[a];if(t=h._listeners,d(t)){for(var r=-1,c=0,f=t.length;c<f;c++)if(t[c]===i||t[c].listener&&t[c].listener===i||t[c]._origin&&t[c]._origin===i){r=c;break}if(r<0)continue;return this.wildcard?h._listeners.splice(r,1):this._events[e].splice(r,1),t.length===0&&(this.wildcard?delete h._listeners:delete this._events[e]),this}else(t===i||t.listener&&t.listener===i||t._origin&&t._origin===i)&&(this.wildcard?delete h._listeners:delete this._events[e])}return this},l.prototype.offAny=function(e){var i=0,t=0,s;if(e&&this._all&&this._all.length>0){for(s=this._all,i=0,t=s.length;i<t;i++)if(e===s[i])return s.splice(i,1),this}else this._all=[];return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(arguments.length===0)return!this._events||g.call(this),this;if(this.wildcard)for(var i=typeof e=="string"?e.split(this.delimiter):e.slice(),t=o.call(this,null,i,this.listenerTree,0),s=0;s<t.length;s++){var n=t[s];n._listeners=null}else{if(!this._events[e])return this;this._events[e]=null}return this},l.prototype.listeners=function(e){if(this.wildcard){var i=[],t=typeof e=="string"?e.split(this.delimiter):e.slice();return o.call(this,i,t,this.listenerTree,0),i}return this._events||g.call(this),this._events[e]||(this._events[e]=[]),d(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.listenersAny=function(){return this._all?this._all:[]},typeof m=="function"&&m.amd?m(function(){return l}):_.EventEmitter2=l})()}(y)),y}export{b as c,k as g,O as r};
