import{r as x}from"./lodash-1163b287.js";import{r as rt}from"./rich-text-f2dcec5f.js";import{r as Mt}from"./eventemitter2-bc59f05f.js";const Ht="quilljs",Kt="0.18.1",zt="Cross browser rich text editor",jt="Jason Chen <jhchen7@gmail.com>",Yt="http://quilljs.com",Xt=["Byron Milligan <byronner@gmail.com>","Keegan Poppen <keegan.poppen@gmail.com>"],Vt="index.js",Wt={eventemitter2:"~0.4.13",lodash:"~2.4.1","rich-text":"~1.0.2"},Qt={async:"~0.9.0","coffee-script":"~1.8.0",coffeeify:"~0.7.0",glob:"~4.0.4",grunt:"~0.4.3","grunt-browserify":"~2.1.0","grunt-contrib-clean":"~0.6.0","grunt-contrib-coffee":"~0.12.0","grunt-contrib-compress":"~0.12.0","grunt-contrib-concat":"~0.5.0","grunt-contrib-connect":"~0.8.0","grunt-contrib-copy":"~0.7.0","grunt-contrib-stylus":"~0.18.0","grunt-contrib-uglify":"~0.6.0","grunt-karma":"~0.9.0","grunt-lodash":"~0.3.0","grunt-protractor-runner":"~1.1.0","grunt-sauce-connect-launcher":"~0.3.0",harp:"~0.14.0",istanbul:"~0.3.0",jquery:"~2.1.1",karma:"~0.12.0","karma-chrome-launcher":"~0.1.2","karma-coffee-preprocessor":"~0.2.1","karma-coverage":"~0.2.0","karma-firefox-launcher":"~0.1.3","karma-html2js-preprocessor":"~0.1.0","karma-jasmine":"~0.2.0","karma-phantomjs-launcher":"~0.1.2","karma-safari-launcher":"~0.1.1","karma-sauce-launcher":"~0.2.2","load-grunt-tasks":"~0.6.0",protractor:"~1.3.1",stylus:"~0.49.2",watchify:"~0.10.2"},$t={node:">=0.10"},Zt="BSD-3-Clause",Jt={type:"git",url:"https://github.com/quilljs/quill"},te={url:"https://github.com/quilljs/quill/issues"},ee={prepublish:"grunt coffee:quill",postpublish:"grunt clean:coffee",test:"grunt test"},ie=["editor","rich text","wysiwyg"],re={name:Ht,version:Kt,description:zt,author:jt,homepage:Yt,contributors:Xt,main:Vt,dependencies:Wt,devDependencies:Qt,engines:$t,license:Zt,repository:Jt,bugs:te,scripts:ee,keywords:ie};var w,at;function A(){if(at)return w;at=1;var m,d,f,s,o,a=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty,n=function(e,t){for(var i in t)r.call(t,i)&&(e[i]=t[i]);function l(){this.constructor=e}return l.prototype=t.prototype,e.prototype=new l,e.__super__=t.prototype,e};return o=x(),s=null,d=function(){function e(t){this.node=t,this.trigger=a(this.trigger,this)}return e.prototype.addClass=function(t){if(!this.hasClass(t))return this.node.classList!=null?this.node.classList.add(t):this.node.className!=null&&(this.node.className=(this.node.className+" "+t).trim()),this},e.prototype.attributes=function(t){var i,l,h,u,c;if(t)return o.each(t,function(p){return function(g,y){return p.node.setAttribute(y,g)}}(this)),this;if(this.node.attributes==null)return{};for(t={},c=this.node.attributes,l=h=0,u=c.length;h<u;l=++h)c[l],i=this.node.attributes[l],t[i.name]=i.value;return t},e.prototype.child=function(t){var i,l;for(i=this.node.firstChild,l=f(i).length();i!=null&&!(t<l);)t-=l,i=i.nextSibling,l=f(i).length();return i==null&&(i=this.node.lastChild,t=f(i).length()),[i,t]},e.prototype.childNodes=function(){return o.map(this.node.childNodes)},e.prototype.classes=function(){return this.node.className.split(/\s+/)},e.prototype.descendants=function(){return o.map(this.node.getElementsByTagName("*"))},e.prototype.get=function(){return this.node},e.prototype.hasClass=function(t){return this.node.classList!=null?this.node.classList.contains(t):this.node.className!=null?o.indexOf(this.classes(),t)>-1:!1},e.prototype.isAncestor=function(t,i){var l;if(i==null&&(i=!1),t===this.node)return i;for(l=this.node;l;){if(l===t)return!0;l=l.parentNode}return!1},e.prototype.isElement=function(){var t;return((t=this.node)!=null?t.nodeType:void 0)===f.ELEMENT_NODE},e.prototype.isTextNode=function(){var t;return((t=this.node)!=null?t.nodeType:void 0)===f.TEXT_NODE},e.prototype.length=function(){var t;return this.node==null?0:(t=this.text().length,this.isElement()&&(t+=this.node.querySelectorAll(o.keys(f.EMBED_TAGS).join(",")).length),t)},e.prototype.merge=function(t){var i;return i=f(t),this.isElement()?(i.moveChildren(this.node),this.normalize()):this.text(this.text()+i.text()),i.remove(),this},e.prototype.moveChildren=function(t){return o.each(this.childNodes(),function(i){return t.appendChild(i)}),this},e.prototype.nextLineNode=function(t){var i;return i=this.node.nextSibling,i==null&&this.node.parentNode!==t&&(i=this.node.parentNode.nextSibling),i!=null&&f.LIST_TAGS[i.tagName]!=null&&(i=i.firstChild),i},e.prototype.normalize=function(){var t,i,l,h;for(i=this.node.firstChild;i!=null;)h=i.nextSibling,t=f(i),h!=null&&f(h).isTextNode()&&(t.text().length===0?t.remove():t.isTextNode()&&(l=h.nextSibling,t.merge(h),h=l)),i=h;return this},e.prototype.on=function(t,i){return this.node.addEventListener(t,function(l){return function(h){var u,c;return u=s&&(t==="keydown"||t==="keyup")?s:h,c=i.call(l.node,u),c||(h.preventDefault(),h.stopPropagation()),c}}(this)),this},e.prototype.remove=function(){var t;return(t=this.node.parentNode)!=null&&t.removeChild(this.node),this.node=null,null},e.prototype.removeClass=function(t){var i;if(this.hasClass(t))return this.node.classList!=null?this.node.classList.remove(t):(this.node.className!=null&&(i=this.classes(),i.splice(o.indexOf(i,t),1),this.node.className=i.join(" ")),this)},e.prototype.replace=function(t){return this.node.parentNode.replaceChild(t,this.node),this.node=t,t},e.prototype.splitAncestors=function(t,i){var l,h,u,c;if(i==null&&(i=!1),this.node===t||this.node.parentNode===t)return this;if(this.node.previousSibling!=null||i){for(u=this.node.parentNode,h=u.cloneNode(!1),u.parentNode.insertBefore(h,u.nextSibling),c=this.node;c!=null;)l=c.nextSibling,h.appendChild(c),c=l;return f(h).splitAncestors(t)}else return f(this.node.parentNode).splitAncestors(t)},e.prototype.split=function(t,i){var l,h,u,c,p,g,y,v,E;if(i==null&&(i=!1),g=this.length(),t=Math.max(0,t),t=Math.min(t,g),!(i||t!==0))return[this.node.previousSibling,this.node,!1];if(!(i||t!==g))return[this.node,this.node.nextSibling,!1];if(this.node.nodeType===f.TEXT_NODE)return l=this.node.splitText(t),[this.node,l,!0];for(c=this.node,y=this.node.cloneNode(!1),this.node.parentNode.insertBefore(y,c.nextSibling),v=this.child(t),h=v[0],t=v[1],E=f(h).split(t),E[0],u=E[1];u!==null;)p=u.nextSibling,y.appendChild(u),u=p;return[c,y,!0]},e.prototype.styles=function(t,i){var l,h;return i==null&&(i=!1),t?(i||(t=o.defaults(t,this.styles())),h=o.map(t,function(u,c){return""+c+": "+u}).join("; ")+";",this.node.setAttribute("style",h),this):(h=this.node.getAttribute("style")||"",l=o.reduce(h.split(";"),function(u,c){var p,g,y;return y=c.split(":"),p=y[0],g=y[1],p&&g&&(p=p.trim(),g=g.trim(),u[p.toLowerCase()]=g),u},{}),l)},e.prototype.switchTag=function(t){var i,l;return t=t.toUpperCase(),this.node.tagName===t?this:(l=this.node.ownerDocument.createElement(t),i=this.attributes(),f.VOID_TAGS[t]==null&&this.moveChildren(l),this.replace(l),this.attributes(i).get())},e.prototype.text=function(t){if(t!=null){switch(this.node.nodeType){case f.ELEMENT_NODE:this.node.textContent=t;break;case f.TEXT_NODE:this.node.data=t}return this}else switch(this.node.nodeType){case f.ELEMENT_NODE:return this.node.tagName===f.DEFAULT_BREAK_TAG?"":f.EMBED_TAGS[this.node.tagName]!=null?f.EMBED_TEXT:this.node.textContent!=null?this.node.textContent:"";case f.TEXT_NODE:return this.node.data||"";default:return""}},e.prototype.textNodes=function(){var t,i,l;for(l=this.node.ownerDocument.createTreeWalker(this.node,NodeFilter.SHOW_TEXT,null,!1),i=[];t=l.nextNode();)i.push(t);return i},e.prototype.toggleClass=function(t,i){return i==null&&(i=!this.hasClass(t)),i?this.addClass(t):this.removeClass(t),this},e.prototype.trigger=function(t,i){var l,h,u;return i==null&&(i={}),o.indexOf(["keypress","keydown","keyup"],t)<0?(l=this.node.ownerDocument.createEvent("Event"),l.initEvent(t,i.bubbles,i.cancelable)):(l=this.node.ownerDocument.createEvent("KeyboardEvent"),s=o.clone(i),o.isNumber(i.key)?s.which=i.key:o.isString(i.key)?s.which=i.key.toUpperCase().charCodeAt(0):s.which=0,f.isIE(10)?(u=[],i.altKey&&u.push("Alt"),i.ctrlKey&&u.push("Control"),i.metaKey&&u.push("Meta"),i.shiftKey&&u.push("Shift"),l.initKeyboardEvent(t,i.bubbles,i.cancelable,this.window(),0,0,u.join(" "),null,null)):(h=o.isFunction(l.initKeyboardEvent)?"initKeyboardEvent":"initKeyEvent",l[h](t,i.bubbles,i.cancelable,this.window(),i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,0,0))),this.node.dispatchEvent(l),s=null,this},e.prototype.unwrap=function(){var t,i;return i=this.node.firstChild,t=this.node.nextSibling,o.each(this.childNodes(),function(l){return function(h){return l.node.parentNode.insertBefore(h,t)}}(this)),this.remove(),i},e.prototype.window=function(){return this.node.ownerDocument.defaultView||this.node.ownerDocument.parentWindow},e.prototype.wrap=function(t){var i;for(this.node.parentNode!=null&&this.node.parentNode.insertBefore(t,this.node),i=t;i.firstChild!=null;)i=t.firstChild;return i.appendChild(this.node),this},e}(),m=function(e){n(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}return t.prototype.default=function(){return this.node.querySelector("option[selected]")},t.prototype.option=function(i,l){var h,u,c,p,g,y;if(l==null&&(l=!0),c=o.isElement(i)?i.value:i,c){for(c=c.replace(/[^\w]+/g,""),y=this.node.children,u=p=0,g=y.length;p<g;u=++p)if(h=y[u],h.value.replace(/[^\w]+/g,"")===c){this.node.selectedIndex=u;break}}else this.node.selectedIndex=-1;return l&&this.trigger("change"),this},t.prototype.reset=function(i){var l;return i==null&&(i=!0),l=this.default(),l!=null?l.selected=!0:this.node.selectedIndex=0,i&&this.trigger("change"),this},t.prototype.value=function(){return this.node.selectedIndex>-1?this.node.options[this.node.selectedIndex].value:""},t}(d),f=function(e){return(e!=null?e.tagName:void 0)==="SELECT"?new m(e):new d(e)},f=o.extend(f,{ELEMENT_NODE:1,NOBREAK_SPACE:"&nbsp;",TEXT_NODE:3,ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF",DEFAULT_BLOCK_TAG:"DIV",DEFAULT_BREAK_TAG:"BR",DEFAULT_INLINE_TAG:"SPAN",EMBED_TEXT:"!",FONT_SIZES:{"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7},KEYS:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},BLOCK_TAGS:{ADDRESS:"ADDRESS",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",BLOCKQUOTE:"BLOCKQUOTE",CANVAS:"CANVAS",DD:"DD",DIV:"DIV",DL:"DL",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FOOTER:"FOOTER",FORM:"FORM",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEADER:"HEADER",HGROUP:"HGROUP",LI:"LI",OL:"OL",OUTPUT:"OUTPUT",P:"P",PRE:"PRE",SECTION:"SECTION",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TR:"TR",UL:"UL",VIDEO:"VIDEO"},EMBED_TAGS:{IMG:"IMG"},LINE_TAGS:{DIV:"DIV",LI:"LI"},LIST_TAGS:{OL:"OL",UL:"UL"},VOID_TAGS:{AREA:"AREA",BASE:"BASE",BR:"BR",COL:"COL",COMMAND:"COMMAND",EMBED:"EMBED",HR:"HR",IMG:"IMG",INPUT:"INPUT",KEYGEN:"KEYGEN",LINK:"LINK",META:"META",PARAM:"PARAM",SOURCE:"SOURCE",TRACK:"TRACK",WBR:"WBR"},convertFontSize:function(e){var t,i,l,h;o.isString(e)&&e.indexOf("px")>-1?(l=o.keys(f.FONT_SIZES),h=o.values(f.FONT_SIZES)):(h=o.keys(f.FONT_SIZES),l=o.values(f.FONT_SIZES));for(t in l)if(i=l[t],parseInt(e)<=parseInt(i))return h[t];return o.last(h)},isIE:function(e){var t;return t=document.documentMode,t&&e>=t},isIOS:function(){return/iPhone|iPad/i.test(navigator.userAgent)},isMac:function(){return/Mac/i.test(navigator.platform)}}),w=f,w}var D,ct;function q(){if(ct)return D;ct=1;var m,d,f;return f=x(),d=A(),m=function(){s.types={LINE:"line"},s.FORMATS={bold:{tag:"B",prepare:"bold"},italic:{tag:"I",prepare:"italic"},underline:{tag:"U",prepare:"underline"},strike:{tag:"S",prepare:"strikeThrough"},color:{style:"color",default:"rgb(0, 0, 0)",prepare:"foreColor"},background:{style:"backgroundColor",default:"rgb(255, 255, 255)",prepare:"backColor"},font:{style:"fontFamily",default:"'Helvetica', 'Arial', sans-serif",prepare:"fontName"},size:{style:"fontSize",default:"13px",prepare:function(o,a){return o.execCommand("fontSize",!1,d.convertFontSize(a))}},link:{tag:"A",attribute:"href"},image:{tag:"IMG",attribute:"src"},align:{type:s.types.LINE,style:"textAlign",default:"left"},bullet:{type:s.types.LINE,exclude:"list",parentTag:"UL",tag:"LI"},list:{type:s.types.LINE,exclude:"bullet",parentTag:"OL",tag:"LI"}};function s(o,a){this.document=o,this.config=a}return s.prototype.add=function(o,a){var r,n,e,t,i;return a?(this.value(o)===a||(f.isString(this.config.parentTag)&&(e=this.document.createElement(this.config.parentTag),d(o).wrap(e),o.parentNode.tagName===((t=o.parentNode.previousSibling)!=null?t.tagName:void 0)&&d(o.parentNode.previousSibling).merge(o.parentNode),o.parentNode.tagName===((i=o.parentNode.nextSibling)!=null?i.tagName:void 0)&&d(o.parentNode).merge(o.parentNode.nextSibling)),f.isString(this.config.tag)&&(r=this.document.createElement(this.config.tag),d.VOID_TAGS[r.tagName]!=null?(o.parentNode!=null&&d(o).replace(r),o=r):this.isType(s.types.LINE)?o=d(o).switchTag(this.config.tag):(d(o).wrap(r),o=r)),(f.isString(this.config.style)||f.isString(this.config.attribute)||f.isString(this.config.class))&&(f.isString(this.config.class)&&(o=this.remove(o)),d(o).isTextNode()&&(n=this.document.createElement(d.DEFAULT_INLINE_TAG),d(o).wrap(n),o=n),f.isString(this.config.style)&&a!==this.config.default&&(o.style[this.config.style]=a),f.isString(this.config.attribute)&&o.setAttribute(this.config.attribute,a),f.isString(this.config.class)&&d(o).addClass(this.config.class+a))),o):this.remove(o)},s.prototype.isType=function(o){return o===this.config.type},s.prototype.match=function(o){var a,r,n,e,t;if(!d(o).isElement()||f.isString(this.config.parentTag)&&((e=o.parentNode)!=null?e.tagName:void 0)!==this.config.parentTag||f.isString(this.config.tag)&&o.tagName!==this.config.tag||f.isString(this.config.style)&&(!o.style[this.config.style]||o.style[this.config.style]===this.config.default)||f.isString(this.config.attribute)&&!o.hasAttribute(this.config.attribute))return!1;if(f.isString(this.config.class)){for(t=d(o).classes(),r=0,n=t.length;r<n;r++)if(a=t[r],a.indexOf(this.config.class)===0)return!0;return!1}return!0},s.prototype.prepare=function(o){if(f.isString(this.config.prepare))return this.document.execCommand(this.config.prepare,!1,o);if(f.isFunction(this.config.prepare))return this.config.prepare(this.document,o)},s.prototype.remove=function(o){var a,r,n,e;if(!this.match(o))return o;if(f.isString(this.config.style)&&(o.style[this.config.style]="",o.getAttribute("style")||o.removeAttribute("style")),f.isString(this.config.attribute)&&o.removeAttribute(this.config.attribute),f.isString(this.config.class)){for(e=d(o).classes(),r=0,n=e.length;r<n;r++)a=e[r],a.indexOf(this.config.class)===0&&d(o).removeClass(a);o.getAttribute("class")||o.removeAttribute("class")}return f.isString(this.config.tag)&&(this.isType(s.types.LINE)?(f.isString(this.config.parentTag)&&(o.previousSibling!=null&&d(o).splitAncestors(o.parentNode.parentNode),o.nextSibling!=null&&d(o.nextSibling).splitAncestors(o.parentNode.parentNode)),o=d(o).switchTag(d.DEFAULT_BLOCK_TAG)):(o=d(o).switchTag(d.DEFAULT_INLINE_TAG),d.EMBED_TAGS[this.config.tag]!=null&&d(o).text(d.EMBED_TEXT))),f.isString(this.config.parentTag)&&d(o.parentNode).unwrap(),o.tagName===d.DEFAULT_INLINE_TAG&&!o.hasAttributes()&&(o=d(o).unwrap()),o},s.prototype.value=function(o){var a,r,n,e;if(this.match(o)){if(f.isString(this.config.attribute))return o.getAttribute(this.config.attribute)||void 0;if(f.isString(this.config.style))return o.style[this.config.style]||void 0;if(f.isString(this.config.class)){for(e=d(o).classes(),r=0,n=e.length;r<n;r++)if(a=e[r],a.indexOf(this.config.class)===0)return a.slice(this.config.class.length)}else if(f.isString(this.config.tag))return!0}},s}(),D=m,D}var I,ht;function nt(){if(ht)return I;ht=1;var m,d;return d=function(){function f(s){this.data=s,this.prev=this.next=null}return f}(),m=function(){f.Node=d;function f(){this.length=0,this.first=this.last=null}return f.prototype.append=function(s){return this.first!=null?(s.next=null,this.last.next=s):this.first=s,s.prev=this.last,this.last=s,this.length+=1},f.prototype.insertAfter=function(s,o){return o.prev=s,s!=null?(o.next=s.next,s.next!=null&&(s.next.prev=o),s.next=o,s===this.last&&(this.last=o)):(o.next=this.first,this.first.prev=o,this.first=o),this.length+=1},f.prototype.remove=function(s){return this.length>1?(s.prev!=null&&(s.prev.next=s.next),s.next!=null&&(s.next.prev=s.prev),s===this.first&&(this.first=s.next),s===this.last&&(this.last=s.prev)):this.first=this.last=null,s.prev=s.next=null,this.length-=1},f.prototype.toArray=function(){var s,o;for(s=[],o=this.first;o!=null;)s.push(o),o=o.next;return s},f}(),I=m,I}var k,ft;function Ut(){if(ft)return k;ft=1;var m,d,f,s,o={}.hasOwnProperty,a=function(r,n){for(var e in n)o.call(n,e)&&(r[e]=n[e]);function t(){this.constructor=r}return t.prototype=n.prototype,r.prototype=new t,r.__super__=n.prototype,r};return s=x(),f=A(),q(),d=nt(),m=function(r){a(n,r),n.ID_PREFIX="leaf-",n.isLeafNode=function(e){return f(e).isTextNode()||e.firstChild==null};function n(e,t){this.node=e,this.formats=s.clone(t),this.id=s.uniqueId(n.ID_PREFIX),this.text=f(this.node).text(),this.length=this.text.length}return n.prototype.deleteText=function(e,t){var i;if(t>0)return this.text=this.text.slice(0,e)+this.text.slice(e+t),this.length=this.text.length,f.EMBED_TAGS[this.node.tagName]!=null?(i=this.node.ownerDocument.createTextNode(this.text),this.node=f(this.node).replace(i)):f(this.node).text(this.text)},n.prototype.insertText=function(e,t){var i;return this.text=this.text.slice(0,e)+t+this.text.slice(e),f(this.node).isTextNode()?f(this.node).text(this.text):(i=this.node.ownerDocument.createTextNode(t),this.node.tagName===f.DEFAULT_BREAK_TAG?this.node=f(this.node).replace(i):(this.node.appendChild(i),this.node=i)),this.length=this.text.length},n}(d.Node),k=m,k}var R,pt;function C(){if(pt)return R;pt=1;var m,d,f;return f=x(),d=A(),m={ALIASES:{STRONG:"B",EM:"I",DEL:"S",STRIKE:"S"},ATTRIBUTES:{color:"color",face:"fontFamily",size:"fontSize"},STYLES:{"background-color":"background-color",color:"color","font-family":"font-family","font-size":"font-size","text-align":"text-align"},TAGS:{DIV:"DIV",BR:"BR",SPAN:"SPAN",B:"B",I:"I",S:"S",U:"U",A:"A",IMG:"IMG",OL:"OL",UL:"UL",LI:"LI"},handleBreaks:function(s){var o;return o=f.map(s.querySelectorAll(d.DEFAULT_BREAK_TAG)),f.each(o,function(a){return function(r){if(r.nextSibling!=null&&(!d.isIE(10)||r.previousSibling!=null))return d(r.nextSibling).splitAncestors(s.parentNode)}}()),s},normalizeLine:function(s){return s=m.wrapInline(s),s=m.handleBreaks(s),s=m.pullBlocks(s),s=m.normalizeNode(s),m.unwrapText(s),s!=null&&d.LIST_TAGS[s.tagName]!=null&&(s=s.firstChild),s},normalizeNode:function(s){return d(s).isTextNode()?s:(f.each(m.ATTRIBUTES,function(o,a){var r;if(s.hasAttribute(a))return r=s.getAttribute(a),a==="size"&&(r=d.convertFontSize(r)),s.style[o]=r,s.removeAttribute(a)}),m.whitelistStyles(s),m.whitelistTags(s))},optimizeLine:function(s){var o,a,r,n;for(o=d(s).length(),r=d(s).descendants(),n=[];r.length>0;)a=r.pop(),(a!=null?a.parentNode:void 0)!=null&&d.EMBED_TAGS[a.tagName]==null&&(a.tagName===d.DEFAULT_BREAK_TAG?o!==0?n.push(d(a).remove()):n.push(void 0):d(a).length()===0?(r.push(a.nextSibling),n.push(d(a).unwrap())):a.previousSibling!=null&&a.tagName===a.previousSibling.tagName&&f.isEqual(d(a).attributes(),d(a.previousSibling).attributes())?(r.push(a.firstChild),n.push(d(a.previousSibling).merge(a))):n.push(void 0));return n},pullBlocks:function(s){var o;for(o=s.firstChild;o!=null;){if(d.BLOCK_TAGS[o.tagName]!=null&&o.tagName!=="LI"){o.previousSibling!=null&&d(o).splitAncestors(s.parentNode),o.nextSibling!=null&&d(o.nextSibling).splitAncestors(s.parentNode),d.LIST_TAGS[o.tagName]==null||!o.firstChild?(d(o).unwrap(),m.pullBlocks(s)):(d(o.parentNode).unwrap(),s.parentNode==null&&(s=o));break}o=o.nextSibling}return s},stripComments:function(s){return s.replace(/<!--[\s\S]*?-->/g,"")},stripWhitespace:function(s){return s=s.replace(/^\s+/,"").replace(/\s+$/,""),s=s.replace(/^\s+/,"").replace(/\s+$/,""),s=s.replace(/(\r?\n|\r)+/g," "),s=s.replace(/\>\s+\</g,"><"),s},whitelistStyles:function(s){var o,a;if(o=d(s).styles(),a=f.omit(o,function(r,n){return m.STYLES[n]==null}),f.keys(a).length<f.keys(o).length)return f.keys(a).length>0?d(s).styles(a,!0):s.removeAttribute("style")},whitelistTags:function(s){return d(s).isElement()&&(m.ALIASES[s.tagName]!=null?s=d(s).switchTag(m.ALIASES[s.tagName]):m.TAGS[s.tagName]==null&&(d.BLOCK_TAGS[s.tagName]!=null?s=d(s).switchTag(d.DEFAULT_BLOCK_TAG):!s.hasAttributes()&&s.firstChild!=null?s=d(s).unwrap():s=d(s).switchTag(d.DEFAULT_INLINE_TAG))),s},wrapInline:function(s){var o,a;if(d.BLOCK_TAGS[s.tagName]!=null)return s;for(o=s.ownerDocument.createElement(d.DEFAULT_BLOCK_TAG),s.parentNode.insertBefore(o,s);s!=null&&d.BLOCK_TAGS[s.tagName]==null;)a=s.nextSibling,o.appendChild(s),s=a;return o},unwrapText:function(s){var o;return o=f.map(s.querySelectorAll(d.DEFAULT_INLINE_TAG)),f.each(o,function(a){if(!a.hasAttributes())return d(a).unwrap()})}},R=m,R}var O,dt;function ot(){if(dt)return O;dt=1;var m,d,f,s,o,a,r,n,e={}.hasOwnProperty,t=function(i,l){for(var h in l)e.call(l,h)&&(i[h]=l[h]);function u(){this.constructor=i}return u.prototype=l.prototype,i.prototype=new u,i.__super__=l.prototype,i};return n=x(),m=rt().Delta,r=A(),d=q(),f=Ut(),s=ot(),o=nt(),a=C(),s=function(i){t(l,i),l.CLASS_NAME="line",l.ID_PREFIX="line-";function l(h,u){this.doc=h,this.node=u,this.id=n.uniqueId(l.ID_PREFIX),this.formats={},r(this.node).addClass(l.CLASS_NAME),this.rebuild(),l.__super__.constructor.call(this,this.node)}return l.prototype.buildLeaves=function(h,u){return n.each(r(h).childNodes(),function(c){return function(p){var g;return p=a.normalizeNode(p),g=n.clone(u),n.each(c.doc.formats,function(y,v){if(!y.isType(d.types.LINE)&&y.match(p))return g[v]=y.value(p)}),f.isLeafNode(p)?c.leaves.append(new f(p,g)):c.buildLeaves(p,g)}}(this))},l.prototype.deleteText=function(h,u){var c,p,g;if(u>0){for(g=this.findLeafAt(h),p=g[0],h=g[1];p!=null&&u>0;)c=Math.min(u,p.length-h),p.deleteText(h,c),u-=c,p=p.next,h=0;return this.rebuild()}},l.prototype.findLeaf=function(h){var u;for(u=this.leaves.first;u!=null;){if(u.node===h)return u;u=u.next}return null},l.prototype.findLeafAt=function(h,u){var c;if(u==null&&(u=!1),h>=this.length-1)return[this.leaves.last,this.leaves.last.length];for(c=this.leaves.first;c!=null;){if(h<c.length||h===c.length&&u)return[c,h];h-=c.length,c=c.next}return[this.leaves.last,h-this.leaves.last.length]},l.prototype.format=function(h,u){var c;return n.isObject(h)?c=h:(c={},c[h]=u),n.each(c,function(p){return function(g,y){var v,E;return E=p.doc.formats[y],E.isType(d.types.LINE)&&(E.config.exclude&&p.formats[E.config.exclude]&&(v=p.doc.formats[E.config.exclude],v!=null&&(p.node=v.remove(p.node),delete p.formats[E.config.exclude])),p.node=E.add(p.node,g)),g?p.formats[y]=g:delete p.formats[y]}}(this)),this.resetContent()},l.prototype.formatText=function(h,u,c,p){var g,y,v,E,T,b,_,L;if(b=this.findLeafAt(h),y=b[0],v=b[1],g=this.doc.formats[c],g!=null&&g.config.type!==d.types.LINE){for(;y!=null&&u>0;){if(E=y.next,p&&y.formats[c]!==p||!p&&y.formats[c]!=null){if(T=y.node,y.formats[c]!=null)for(r(T).splitAncestors(this.node);!g.match(T);)T=T.parentNode;v>0&&(_=r(T).split(v),_[0],T=_[1]),y.length>v+u&&(L=r(T).split(u),T=L[0],L[1]),g.add(T,p)}u-=y.length-v,v=0,y=E}return this.rebuild()}},l.prototype.insertText=function(h,u,c){var p,g,y,v,E,T;if(c==null&&(c={}),u.length>0)return E=this.findLeafAt(h),p=E[0],g=E[1],n.isEqual(p.formats,c)?(p.insertText(g,u),this.resetContent()):(v=n.reduce(c,function(b){return function(_,L,N){return b.doc.formats[N].add(_,L)}}(this),this.node.ownerDocument.createTextNode(u)),T=r(p.node).split(g),T[0],y=T[1],y&&(y=r(y).splitAncestors(this.node).get()),this.node.insertBefore(v,y),this.rebuild())},l.prototype.optimize=function(){return a.optimizeLine(this.node),this.rebuild()},l.prototype.rebuild=function(h){return h==null&&(h=!1),!h&&this.outerHTML!=null&&this.outerHTML===this.node.outerHTML&&n.all(this.leaves.toArray(),function(u){return function(c){return r(c.node).isAncestor(u.node)}}(this))?!1:(this.node=a.normalizeNode(this.node),r(this.node).length()===0&&!this.node.querySelector(r.DEFAULT_BREAK_TAG)&&this.node.appendChild(this.node.ownerDocument.createElement(r.DEFAULT_BREAK_TAG)),this.leaves=new o,this.formats=n.reduce(this.doc.formats,function(u){return function(c,p,g){return p.isType(d.types.LINE)&&(p.match(u.node)?c[g]=p.value(u.node):delete c[g]),c}}(this),this.formats),this.buildLeaves(this.node,{}),this.resetContent(),!0)},l.prototype.resetContent=function(){return this.node.id!==this.id&&(this.node.id=this.id),this.outerHTML=this.node.outerHTML,this.length=1,this.delta=new m,this.leaves.toArray().forEach(function(h){return function(u){return h.length+=u.length,r.EMBED_TAGS[u.node.tagName]!=null?h.delta.insert(1,u.formats):h.delta.insert(u.text,u.formats)}}(this)),this.delta.insert(`
`,this.formats)},l}(o.Node),O=s,O}var M,gt;function Bt(){if(gt)return M;gt=1;var m,d,f,s,o,a,r,n;return n=x(),m=rt().Delta,r=A(),f=q(),s=ot(),o=nt(),a=C(),d=function(){function e(t,i){this.root=t,i==null&&(i={}),this.formats={},n.each(i.formats,n.bind(this.addFormat,this)),this.setHTML(this.root.innerHTML)}return e.prototype.addFormat=function(t,i){return n.isObject(i)||(i=f.FORMATS[t]),this.formats[t]!=null&&console.warn("Overwriting format",t,this.formats[t]),this.formats[t]=new f(this.root.ownerDocument,i)},e.prototype.appendLine=function(t){return this.insertLineBefore(t,null)},e.prototype.findLeafAt=function(t,i){var l,h,u;return u=this.findLineAt(t),l=u[0],h=u[1],l!=null?l.findLeafAt(h,i):[null,h]},e.prototype.findLine=function(t){for(var i;t!=null&&r.BLOCK_TAGS[t.tagName]==null;)t=t.parentNode;return i=t!=null?this.lineMap[t.id]:null,(i!=null?i.node:void 0)===t?i:null},e.prototype.findLineAt=function(t){var i,l;if(!(this.lines.length>0))return[null,t];if(l=this.toDelta().length(),t===l)return[this.lines.last,this.lines.last.length];if(t>l)return[null,t-l];for(i=this.lines.first;i!=null;){if(t<i.length)return[i,t];t-=i.length,i=i.next}return[null,t]},e.prototype.insertLineBefore=function(t,i){var l;return l=new s(this,t),i!=null?(r(t.parentNode).isElement()||this.root.insertBefore(t,i.node),this.lines.insertAfter(i.prev,l)):(r(t.parentNode).isElement()||this.root.appendChild(t),this.lines.append(l)),this.lineMap[l.id]=l,l},e.prototype.mergeLines=function(t,i){return i.length>1&&(t.length===1&&r(t.leaves.last.node).remove(),n.each(r(i.node).childNodes(),function(l){if(l.tagName!==r.DEFAULT_BREAK_TAG)return t.node.appendChild(l)})),this.removeLine(i),t.rebuild()},e.prototype.optimizeLines=function(){return n.each(this.lines.toArray(),function(t,i){return t.optimize(),!0})},e.prototype.rebuild=function(){var t,i,l;for(i=this.lines.toArray(),t=this.root.firstChild,t!=null&&r.LIST_TAGS[t.tagName]!=null&&(t=t.firstChild),n.each(i,function(h){return function(u,c){for(var p;u.node!==t;)if(u.node.parentNode===h.root||((p=u.node.parentNode)!=null?p.parentNode:void 0)===h.root)t=a.normalizeLine(t),h.insertLineBefore(t,u),t=r(t).nextLineNode(h.root);else return h.removeLine(u);return u.outerHTML!==t.outerHTML&&(u.node=a.normalizeLine(u.node),u.rebuild()),t=r(t).nextLineNode(h.root)}}(this)),l=[];t!=null;)t=a.normalizeLine(t),this.appendLine(t),l.push(t=r(t).nextLineNode(this.root));return l},e.prototype.removeLine=function(t){return t.node.parentNode!=null&&(r.LIST_TAGS[t.node.parentNode.tagName]&&t.node.parentNode.childNodes.length===1?r(t.node.parentNode).remove():r(t.node).remove()),delete this.lineMap[t.id],this.lines.remove(t)},e.prototype.setHTML=function(t){return t=a.stripComments(t),t=a.stripWhitespace(t),this.root.innerHTML=t,this.lines=new o,this.lineMap={},this.rebuild()},e.prototype.splitLine=function(t,i){var l,h,u,c;return i=Math.min(i,t.length-1),c=r(t.node).split(i,!0),l=c[0],h=c[1],t.node=l,t.rebuild(),u=this.insertLineBefore(h,t.next),u.formats=n.clone(t.formats),u.resetContent(),u},e.prototype.toDelta=function(){var t,i;return i=this.lines.toArray(),t=new m,i.forEach(function(l){return l.delta.ops.forEach(function(h){return t.push(h)})}),t},e}(),M=d,M}var U,mt;function ne(){if(mt)return U;mt=1;var m,d,f,s,o,a;return a=x(),s=A(),C(),m={html:{height:"100%",width:"100%"},body:{"box-sizing":"border-box",cursor:"text","font-family":"'Helvetica', 'Arial', sans-serif","font-size":"13px",height:"100%","line-height":"1.42",margin:"0px","overflow-x":"hidden","overflow-y":"auto",padding:"12px 15px"},".editor-container":{height:"100%",outline:"none",position:"relative","tab-size":"4","white-space":"pre-wrap"},".editor-container div":{margin:"0",padding:"0"},".editor-container a":{"text-decoration":"underline"},".editor-container b":{"font-weight":"bold"},".editor-container i":{"font-style":"italic"},".editor-container s":{"text-decoration":"line-through"},".editor-container u":{"text-decoration":"underline"},".editor-container img":{"max-width":"100%"},".editor-container blockquote":{margin:"0 0 0 2em",padding:"0"},".editor-container ol":{margin:"0 0 0 2em",padding:"0","list-style-type":"decimal"},".editor-container ul":{margin:"0 0 0 2em",padding:"0","list-style-type":"disc"}},d=["decimal","lower-alpha","lower-roman"],o=".editor-container ol > li",a.each([1,2,3,4,5,6,7,8,9],function(r){return o+=" > ol",m[o]={"list-style-type":d[r%3]},o+=" > li"}),s.isIE(10)&&(m[s.DEFAULT_BREAK_TAG]={display:"none"}),f=function(){r.objToCss=function(n){return a.map(n,function(e,t){var i;return i=a.map(e,function(l,h){return""+h+": "+l+";"}).join(" "),""+t+" { "+i+" }"}).join(`
`)},r.buildFrame=function(n){var e,t,i;return e=n.ownerDocument.createElement("iframe"),s(e).attributes({frameBorder:"0",height:"100%",width:"100%",title:"Quill Rich Text Editor",role:"presentation"}),n.appendChild(e),t=e.contentWindow.document,t.open(),t.write("<!DOCTYPE html>"),t.close(),i=t.createElement("div"),t.body.appendChild(i),[i,e]};function r(n,e){var t;this.container=n,this.options=e??{},this.container.innerHTML="",t=r.buildFrame(this.container),this.root=t[0],this.iframe=t[1],this.root.setAttribute("id",this.options.id),this.iframe.setAttribute("name",this.options.id),s(this.root).addClass("editor-container"),s(this.container).addClass("ql-container"),s.isIOS()&&s(this.container).styles({overflow:"auto","-webkit-overflow-scrolling":"touch"}),this.addStyles(m),this.options.styles!=null&&a.defer(a.bind(this.addStyles,this,this.options.styles))}return r.prototype.addContainer=function(n,e){var t,i;return e==null&&(e=!1),i=e?this.root:null,t=this.root.ownerDocument.createElement("div"),s(t).addClass(n),this.root.parentNode.insertBefore(t,i),t},r.prototype.addStyles=function(n){var e,t;if(typeof n=="object")return t=this.root.ownerDocument.createElement("style"),t.type="text/css",n=r.objToCss(n),t.appendChild(this.root.ownerDocument.createTextNode(n)),this.root.ownerDocument.head.appendChild(t);if(typeof n=="string")return e=this.root.ownerDocument.createElement("link"),s(e).attributes({type:"text/css",rel:"stylesheet",href:n}),this.root.ownerDocument.head.appendChild(e)},r}(),U=f,U}var B,yt;function Pt(){if(yt)return B;yt=1;var m,d;return d=x(),m=function(){f.compare=function(s,o){return s===o?!0:s!=null&&o!=null?s.equals(o):!1};function f(s,o){this.start=s,this.end=o}return f.prototype.equals=function(s){return s==null?!1:this.start===s.start&&this.end===s.end},f.prototype.shift=function(s,o){var a;return a=d.map([this.start,this.end],function(r){return s>r?r:o>=0?r+o:Math.max(s,r+o)}),this.start=a[0],this.end=a[1],a},f.prototype.isCollapsed=function(){return this.start===this.end},f}(),B=m,B}var P,vt;function oe(){if(vt)return P;vt=1;var m,d,f,s,o;return o=x(),s=A(),Ut(),m=C(),d=Pt(),f=function(){function a(r,n,e){this.doc=r,this.iframe=n,this.emitter=e,this.document=this.doc.root.ownerDocument,this.focus=!1,this.range=new d(0,0),this.nullDelay=!1,this.update("silent")}return a.prototype.checkFocus=function(){return this.document.activeElement===this.doc.root&&document.activeElement===this.iframe},a.prototype.getRange=function(r){var n,e,t;return r==null&&(r=!1),this.checkFocus()?(e=this._getNativeRange(),e==null?null:(t=this._positionToIndex(e.startContainer,e.startOffset),e.startContainer===e.endContainer&&e.startOffset===e.endOffset?n=t:n=this._positionToIndex(e.endContainer,e.endOffset),new d(Math.min(t,n),Math.max(t,n)))):r?this.range:null},a.prototype.preserve=function(r){var n,e,t,i,l,h,u,c,p;return t=this._getNativeRange(),t!=null&&this.checkFocus()?(h=this._encodePosition(t.startContainer,t.startOffset),i=h[0],l=h[1],u=this._encodePosition(t.endContainer,t.endOffset),n=u[0],e=u[1],r(),c=this._decodePosition(i,l),i=c[0],l=c[1],p=this._decodePosition(n,e),n=p[0],e=p[1],this._setNativeRange(i,l,n,e)):r()},a.prototype.setRange=function(r,n){var e,t,i,l,h,u,c;return r!=null?(h=this._indexToPosition(r.start),i=h[0],l=h[1],r.isCollapsed()?(u=[i,l],e=u[0],t=u[1]):(c=this._indexToPosition(r.end),e=c[0],t=c[1]),this._setNativeRange(i,l,e,t)):this._setNativeRange(null),this.update(n)},a.prototype.shiftAfter=function(r,n,e){var t;if(t=this.getRange(),e(),t!=null)return t.shift(r,n),this.setRange(t,"silent")},a.prototype.update=function(r){var n,e,t,i;if(e=this.checkFocus(),t=this.getRange(!0),n=r!=="silent"&&(!d.compare(t,this.range)||e!==this.focus),i=e?t:null,i===null&&r==="user"&&!this.nullDelay)return this.nullDelay=!0;if(this.nullDelay=!1,this.range=t,this.focus=e,n)return this.emitter.emit(this.emitter.constructor.events.SELECTION_CHANGE,i,r)},a.prototype._decodePosition=function(r,n){var e;return s(r).isElement()&&(e=o.indexOf(s(r.parentNode).childNodes(),r),n+=e,r=r.parentNode),[r,n]},a.prototype._encodePosition=function(r,n){for(var e;;){if(s(r).isTextNode()||r.tagName===s.DEFAULT_BREAK_TAG||s.EMBED_TAGS[r.tagName]!=null)return[r,n];if(n<r.childNodes.length)r=r.childNodes[n],n=0;else{if(r.childNodes.length===0)return m.TAGS[r.tagName]==null&&(e=r.ownerDocument.createTextNode(""),r.appendChild(e),r=e),[r,0];if(r=r.lastChild,s(r).isElement()){if(r.tagName===s.DEFAULT_BREAK_TAG||s.EMBED_TAGS[r.tagName]!=null)return[r,1];n=r.childNodes.length}else return[r,s(r).length()]}}},a.prototype._getNativeRange=function(){var r,n;return n=this.document.getSelection(),(n!=null?n.rangeCount:void 0)>0&&(r=n.getRangeAt(0),s(r.startContainer).isAncestor(this.doc.root,!0)&&(r.startContainer===r.endContainer||s(r.endContainer).isAncestor(this.doc.root,!0)))?r:null},a.prototype._indexToPosition=function(r){var n,e,t;return this.doc.lines.length===0?[this.doc.root,0]:(t=this.doc.findLeafAt(r,!0),n=t[0],e=t[1],this._decodePosition(n.node,e))},a.prototype._positionToIndex=function(r,n){var e,t,i,l,h,u;if(u=this._encodePosition(r,n),t=u[0],n=u[1],l=this.doc.findLine(t),l==null)return 0;for(e=l.findLeaf(t),h=0;l.prev!=null;)l=l.prev,h+=l.length;if(e==null)return h;for(i=0;e.prev!=null;)e=e.prev,i+=e.length;return h+i+n},a.prototype._setNativeRange=function(r,n,e,t){var i,l;if(l=this.document.getSelection(),!!l)if(r!=null){if(this.checkFocus()||this.doc.root.focus(),i=this._getNativeRange(),(i==null||r!==i.startContainer||n!==i.startOffset||e!==i.endContainer||t!==i.endOffset)&&(l.removeAllRanges(),i=this.document.createRange(),i.setStart(r,n),i.setEnd(e,t),l.addRange(i),!this.checkFocus()))return this.doc.root.focus()}else return l.removeAllRanges(),this.doc.root.blur()},a}(),P=f,P}var F,Et;function se(){if(Et)return F;Et=1;var m,d,f,s,o,a;return a=x(),o=A(),m=Bt(),ot(),f=ne(),s=oe(),d=function(){r.sources={API:"api",SILENT:"silent",USER:"user"};function r(n,e,t){this.iframeContainer=n,this.quill=e,this.options=t??{},this.renderer=new f(this.iframeContainer,this.options),o(this.iframeContainer).on("focus",this.focus.bind(this)),this.root=this.renderer.root,this.doc=new m(this.root,this.options),this.delta=this.doc.toDelta(),this.selection=new s(this.doc,this.renderer.iframe,this.quill),this.timer=setInterval(a.bind(this.checkUpdate,this),this.options.pollInterval),this.options.readOnly||this.enable()}return r.prototype.disable=function(){return this.enable(!1)},r.prototype.enable=function(n){return n==null&&(n=!0),this.root.setAttribute("contenteditable",n)},r.prototype.applyDelta=function(n,e){var t;if(t=this._update(),t&&(n=t.transform(n,!0),t=n.transform(t,!1)),n.ops.length>0&&(n=this._trackDelta(function(i){return function(){var l;return l=0,a.each(n.ops,function(h){if(a.isString(h.insert))return i._insertAt(l,h.insert,h.attributes),l+=h.insert.length;if(a.isNumber(h.insert))return i._insertAt(l,o.EMBED_TEXT,h.attributes),l+=1;if(a.isNumber(h.delete))return i._deleteAt(l,h.delete);if(a.isNumber(h.retain))return a.each(h.attributes,function(u,c){return i._formatAt(l,h.retain,c,u)}),l+=h.retain}),i.selection.shiftAfter(0,0,a.bind(i.doc.optimizeLines,i.doc))}}(this)),this.delta=this.doc.toDelta(),this.innerHTML=this.root.innerHTML,n&&e!==r.sources.SILENT&&this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,n,e)),t&&t.ops.length>0&&e!==r.sources.SILENT)return this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,t,r.sources.USER)},r.prototype.checkUpdate=function(n){var e;return n==null&&(n="user"),this.renderer.iframe.parentNode==null||this.root.parentNode==null?clearInterval(this.timer):(e=this._update(),e&&(this.delta.compose(e),this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,e,n)),e&&(n=r.sources.SILENT),this.selection.update(n))},r.prototype.focus=function(){return o.isIE(11)&&this.selection.setRange(this.selection.range),o.isIOS()&&this.renderer.iframe.focus(),this.root.focus()},r.prototype.getDelta=function(){return this.delta},r.prototype._deleteAt=function(n,e){if(!(e<=0))return this.selection.shiftAfter(n,-1*e,function(t){return function(){var i,l,h,u,c,p,g;for(g=t.doc.findLineAt(n),h=g[0],p=g[1],i=h,u=h.length-p<=e&&p>0;i!=null&&e>0;)c=i.next,l=Math.min(i.length-p,e),p===0&&e>=i.length?t.doc.removeLine(i):i.deleteText(p,l),e-=l,i=c,p=0;if(u&&h.next)return t.doc.mergeLines(h,h.next)}}(this))},r.prototype._formatAt=function(n,e,t,i){return this.selection.shiftAfter(n,0,function(l){return function(){var h,u,c,p,g;for(p=l.doc.findLineAt(n),u=p[0],c=p[1],g=[];u!=null&&e>0;)h=Math.min(e,u.length-c-1),u.formatText(c,h,t,i),e-=h,e>0&&u.format(t,i),e-=1,c=0,g.push(u=u.next);return g}}(this))},r.prototype._insertAt=function(n,e,t){return t==null&&(t={}),this.selection.shiftAfter(n,e.length,function(i){return function(){var l,h,u,c;return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),h=e.split(`
`),c=i.doc.findLineAt(n),l=c[0],u=c[1],a.each(h,function(p,g){var y;return l==null||l.length<=u?(g<h.length-1||p.length>0)&&(l=i.doc.appendLine(i.root.ownerDocument.createElement(o.DEFAULT_BLOCK_TAG)),u=0,l.insertText(u,p,t),l.format(t),y=null):(l.insertText(u,p,t),g<h.length-1&&(y=i.doc.splitLine(l,u+p.length),a.each(a.defaults({},t,l.formats),function(v,E){return l.format(E,t[E])}),u=0)),l=y})}}(this))},r.prototype._trackDelta=function(n){var e,t;return n(),t=this.doc.toDelta(),e=this.delta.diff(t),e},r.prototype._update=function(){var n;return this.innerHTML===this.root.innerHTML?!1:(n=this._trackDelta(function(e){return function(){return e.selection.preserve(a.bind(e.doc.rebuild,e.doc)),e.selection.shiftAfter(0,0,a.bind(e.doc.optimizeLines,e.doc))}}(this)),this.innerHTML=this.root.innerHTML,n.ops.length>0?n:!1)},r}(),F=d,F}var G,Tt;function Ft(){if(Tt)return G;Tt=1;var m;return m=function(){d.OPTIONS={};function d(f){this.quill=f,this.editor=this.quill.editor,this.editorContainer=this.editor.root}return d}(),G=m,G}var H,bt;function Gt(){if(bt)return H;bt=1;var m,d,f,s;return s=x(),f=A(),m=C(),d=function(){o.TEMPLATE='<span class="ql-picker-label"></span><span class="ql-picker-options"></span>';function o(a){this.select=a,this.container=this.select.ownerDocument.createElement("span"),this.buildPicker(),f(this.container).addClass("ql-picker"),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),f(this.select.ownerDocument).on("click",function(r){return function(){return r.close(),!0}}(this)),f(this.label).on("click",function(r){return function(){return s.defer(function(){return f(r.container).toggleClass("ql-expanded")}),!1}}(this)),f(this.select).on("change",function(r){return function(){var n,e;return r.select.selectedIndex>-1&&(n=r.container.querySelectorAll(".ql-picker-item")[r.select.selectedIndex],e=r.select.options[r.select.selectedIndex]),r.selectItem(n,!1),f(r.label).toggleClass("ql-active",e!==f(r.select).default())}}(this))}return o.prototype.buildItem=function(a,r,n){var e;return e=this.select.ownerDocument.createElement("span"),e.setAttribute("data-value",r.getAttribute("value")),f(e).addClass("ql-picker-item").text(f(r).text()).on("click",function(t){return function(){return t.selectItem(e,!0),t.close()}}(this)),this.select.selectedIndex===n&&this.selectItem(e,!1),e},o.prototype.buildPicker=function(){var a;return s.each(f(this.select).attributes(),function(r){return function(n,e){return r.container.setAttribute(e,n)}}(this)),this.container.innerHTML=m.stripWhitespace(o.TEMPLATE),this.label=this.container.querySelector(".ql-picker-label"),a=this.container.querySelector(".ql-picker-options"),s.each(this.select.options,function(r){return function(n,e){var t;return t=r.buildItem(a,n,e),a.appendChild(t)}}(this))},o.prototype.close=function(){return f(this.container).removeClass("ql-expanded")},o.prototype.selectItem=function(a,r){var n,e;return n=this.container.querySelector(".ql-selected"),n!=null&&f(n).removeClass("ql-selected"),a!=null?(e=a.getAttribute("data-value"),f(a).addClass("ql-selected"),f(this.label).text(f(a).text()),f(this.select).option(e,r),this.label.setAttribute("data-value",e)):(this.label.innerHTML="&nbsp;",this.label.removeAttribute("data-value"))},o}(),H=d,H}var K,_t;function le(){if(_t)return K;_t=1;var m,d,f,s={}.hasOwnProperty,o=function(a,r){for(var n in r)s.call(r,n)&&(a[n]=r[n]);function e(){this.constructor=a}return e.prototype=r.prototype,a.prototype=new e,a.__super__=r.prototype,a};return f=A(),d=Gt(),m=function(a){o(r,a);function r(){r.__super__.constructor.apply(this,arguments),f(this.container).addClass("ql-color-picker")}return r.prototype.buildItem=function(n,e,t){var i;return i=r.__super__.buildItem.call(this,n,e,t),i.style.backgroundColor=e.value,i},r}(d),K=m,K}var z,xt;function ue(){if(xt)return z;xt=1;var m,d,f,s,o,a,r={}.hasOwnProperty,n=function(e,t){for(var i in t)r.call(t,i)&&(e[i]=t[i]);function l(){this.constructor=e}return l.prototype=t.prototype,e.prototype=new l,e.__super__=t.prototype,e};return a=x(),m=le(),d=Ft(),o=A(),f=Gt(),s=function(e){n(t,e),t.COLORS=["#000000","#e60000","#ff9900","#ffff00","#008A00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],t.OPTIONS={"multi-cursor":{template:'<span class="cursor-flag"> <span class="cursor-triangle top"></span> <span class="cursor-name"></span> <span class="cursor-triangle bottom"></span> </span> <span class="cursor-caret"></span>'}},t.STYLES={".snow .image-tooltip-container a":{border:"1px solid #06c"},".snow .image-tooltip-container a.insert":{"background-color":"#06c",color:"#fff"},".snow .cursor-name":{"border-radius":"4px","font-size":"11px","font-family":"Arial","margin-left":"-50%",padding:"4px 10px"},".snow .cursor-triangle":{"border-left":"4px solid transparent","border-right":"4px solid transparent",height:"0px","margin-left":"-3px",width:"0px"},".snow .cursor.left .cursor-name":{"margin-left":"-8px"},".snow .cursor.right .cursor-flag":{right:"auto"},".snow .cursor.right .cursor-name":{"margin-left":"-100%","margin-right":"-8px"},".snow .cursor-triangle.bottom":{"border-top":"4px solid transparent",display:"block","margin-bottom":"-1px"},".snow .cursor-triangle.top":{"border-bottom":"4px solid transparent",display:"none","margin-top":"-1px"},".snow .cursor.top .cursor-triangle.bottom":{display:"none"},".snow .cursor.top .cursor-triangle.top":{display:"block"},".snow a":{color:"#06c"},".snow .tooltip":{border:"1px solid #ccc","box-shadow":"0px 0px 5px #ddd",color:"#222"},".snow .tooltip a":{color:"#06c"},".snow .tooltip .input":{border:"1px solid #ccc",margin:"0px",padding:"5px"},".snow .image-tooltip-container .preview":{"border-color":"#ccc",color:"#ccc"},".snow .link-tooltip-container a, .snow .link-tooltip-container span":{display:"inline-block","line-height":"25px"}};function t(i){this.quill=i,t.__super__.constructor.apply(this,arguments),this.quill.addStyles(t.STYLES),this.pickers=[],this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(l){return function(h){if(h!=null)return a.invoke(l.pickers,"close")}}(this)),o(this.quill.root.ownerDocument.body).addClass("snow"),this.quill.onModuleLoad("multi-cursor",a.bind(this.extendMultiCursor,this)),this.quill.onModuleLoad("toolbar",a.bind(this.extendToolbar,this))}return t.prototype.extendMultiCursor=function(i){return i.on(i.constructor.events.CURSOR_ADDED,function(l){var h,u;return h=l.elem.querySelector(".cursor-triangle.bottom"),u=l.elem.querySelector(".cursor-triangle.top"),h.style.borderTopColor=u.style.borderBottomColor=l.color})},t.prototype.extendToolbar=function(i){return a.each(["color","background","font","size","align"],function(l){return function(h){var u,c;if(c=i.container.querySelector(".ql-"+h),c!=null){switch(h){case"font":case"size":case"align":u=new f(c);break;case"color":case"background":u=new m(c),a.each(u.container.querySelectorAll(".ql-picker-item"),function(p,g){if(g<7)return o(p).addClass("ql-primary-color")})}if(u!=null)return l.pickers.push(u)}}}(this)),a.each(o(i.container).textNodes(),function(l){if(o(l).text().trim().length===0)return o(l).remove()})},t}(d),z=s,z}var j,Lt;function S(){if(Lt)return j;Lt=1;var m,d,f,s,o,a,r,n,e,t={}.hasOwnProperty,i=function(h,u){for(var c in u)t.call(u,c)&&(h[c]=u[c]);function p(){this.constructor=h}return p.prototype=u.prototype,h.prototype=new p,h.__super__=u.prototype,h},l=[].slice;return e=x(),n=re,m=rt().Delta,f=Mt().EventEmitter2,r=A(),d=se(),s=q(),a=Pt(),o=function(h){i(u,h),u.version=n.version,u.editors=[],u.modules=[],u.themes=[],u.DEFAULTS={formats:["align","bold","italic","strike","underline","color","background","font","size","link","image","bullet","list"],modules:{keyboard:!0,"paste-manager":!0,"undo-manager":!0},pollInterval:100,readOnly:!1,theme:"default"},u.events={MODULE_INIT:"module-init",POST_EVENT:"post-event",PRE_EVENT:"pre-event",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},u.sources=d.sources,u.registerModule=function(c,p){return u.modules[c]!=null&&console.warn("Overwriting "+c+" module"),u.modules[c]=p},u.registerTheme=function(c,p){return u.themes[c]!=null&&console.warn("Overwriting "+c+" theme"),u.themes[c]=p},u.require=function(c){switch(c){case"lodash":return e;case"delta":return m;case"dom":return r;default:return null}};function u(c,p){var g,y,v;if(p==null&&(p={}),e.isString(c)&&(c=document.querySelector(c)),c==null)throw new Error("Invalid Quill container");if(y=e.defaults(p.modules||{},u.DEFAULTS.modules),g=c.innerHTML,this.options=e.defaults(p,u.DEFAULTS),this.options.modules=y,this.options.id=this.id="quill-"+(u.editors.length+1),this.options.emitter=this,this.modules={},this.editor=new d(c,this,this.options),this.root=this.editor.doc.root,u.editors.push(this),this.setHTML(g,u.sources.SILENT),v=u.themes[this.options.theme],v==null)throw new Error("Cannot load "+this.options.theme+" theme. Are you sure you registered it?");this.theme=new v(this,this.options),e.each(this.options.modules,function(E){return function(T,b){return E.addModule(b,T)}}(this))}return u.prototype.addContainer=function(c,p){return p==null&&(p=!1),this.editor.renderer.addContainer(c,p)},u.prototype.addFormat=function(c,p){return this.editor.doc.addFormat(c,p)},u.prototype.addModule=function(c,p){var g;if(g=u.modules[c],g==null)throw new Error("Cannot load "+c+" module. Are you sure you registered it?");return e.isObject(p)||(p={}),p=e.defaults(p,this.theme.constructor.OPTIONS[c]||{},g.DEFAULTS||{}),this.modules[c]=new g(this,p),this.emit(u.events.MODULE_INIT,c,this.modules[c]),this.modules[c]},u.prototype.addStyles=function(c){return this.editor.renderer.addStyles(c)},u.prototype.deleteText=function(c,p,g){var y,v;if(g==null&&(g=u.sources.API),v=this._buildParams(c,p,{},g),c=v[0],p=v[1],v[2],g=v[3],p>c)return y=new m().retain(c).delete(p-c),this.editor.applyDelta(y,g)},u.prototype.emit=function(){var c,p;return p=arguments[0],c=2<=arguments.length?l.call(arguments,1):[],u.__super__.emit.apply(this,[u.events.PRE_EVENT,p].concat(l.call(c))),u.__super__.emit.apply(this,[p].concat(l.call(c))),u.__super__.emit.apply(this,[u.events.POST_EVENT,p].concat(l.call(c)))},u.prototype.focus=function(){return this.editor.focus()},u.prototype.formatLine=function(c,p,g,y,v){var E,T,b,_,L;return _=this._buildParams(c,p,g,y,v),c=_[0],p=_[1],E=_[2],v=_[3],L=this.editor.doc.findLineAt(p),T=L[0],b=L[1],T!=null&&(p+=T.length-b),this.formatText(c,p,E,v)},u.prototype.formatText=function(c,p,g,y,v){var E,T,b;return b=this._buildParams(c,p,g,y,v),c=b[0],p=b[1],T=b[2],v=b[3],T=e.reduce(T,function(_){return function(L,N,lt){var ut;return ut=_.editor.doc.formats[lt],N&&N!==ut.config.default||(L[lt]=null),L}}(this),T),E=new m().retain(c).retain(p-c,T),this.editor.applyDelta(E,v)},u.prototype.getContents=function(c,p){return c==null&&(c=0),p==null&&(p=null),e.isObject(c)&&(p=c.end,c=c.start),this.editor.getDelta().slice(c,p)},u.prototype.getHTML=function(){return this.root.innerHTML},u.prototype.getLength=function(){return this.editor.getDelta().length()},u.prototype.getModule=function(c){return this.modules[c]},u.prototype.getSelection=function(){return this.editor.checkUpdate(),this.editor.selection.getRange()},u.prototype.getText=function(c,p){return c==null&&(c=0),p==null&&(p=null),e.map(this.getContents(c,p).ops,function(g){return e.isString(g.insert)?g.insert:""}).join("")},u.prototype.insertEmbed=function(c,p,g,y){return this.insertText(c,r.EMBED_TEXT,p,g,y)},u.prototype.insertText=function(c,p,g,y,v){var E,T,b;if(b=this._buildParams(c,0,g,y,v),c=b[0],b[1],T=b[2],v=b[3],p.length>0)return E=new m().retain(c).insert(p,T),this.editor.applyDelta(E,v)},u.prototype.onModuleLoad=function(c,p){return this.modules[c]?p(this.modules[c]):this.on(u.events.MODULE_INIT,function(g,y){if(g===c)return p(y)})},u.prototype.prepareFormat=function(c,p){var g,y;if(g=this.editor.doc.formats[c],g!=null&&(y=this.getSelection(),!!(y!=null&&y.isCollapsed())))return g.isType(s.types.LINE)?this.formatLine(y,c,p,u.sources.USER):g.prepare(p)},u.prototype.setContents=function(c,p){return p==null&&(p=u.sources.API),e.isArray(c)&&(c={ops:c}),c.ops.unshift({delete:this.getLength()}),this.updateContents(c,p)},u.prototype.setHTML=function(c,p){return p==null&&(p=u.sources.API),c||(c="<"+r.DEFAULT_BLOCK_TAG+"><"+r.DEFAULT_BREAK_TAG+"></"+r.DEFAULT_BLOCK_TAG+">"),this.editor.doc.setHTML(c),this.editor.checkUpdate(p)},u.prototype.setSelection=function(c,p,g){var y;return g==null&&(g=u.sources.API),e.isNumber(c)&&e.isNumber(p)?y=new a(c,p):(y=c,g=p||g),this.editor.selection.setRange(y,g)},u.prototype.updateContents=function(c,p){return p==null&&(p=u.sources.API),this.editor.applyDelta(c,p)},u.prototype._buildParams=function(){var c,p;return p=1<=arguments.length?l.call(arguments,0):[],e.isObject(p[0])&&p.splice(0,1,p[0].start,p[0].end),e.isString(p[2])&&(c={},c[p[2]]=p[3],p.splice(2,2,c)),p[3]==null&&(p[3]=u.sources.API),p},u}(f),o.registerTheme("default",Ft()),o.registerTheme("snow",ue()),j=o,j}var Y,At;function ae(){if(At)return Y;At=1;var m,d,f,s,o;return f=S(),o=f.require("lodash"),s=f.require("dom"),d=f.require("delta"),m=function(){a.DEFAULTS={authorId:null,color:"transparent",enabled:!1};function a(r,n){this.quill=r,this.options=n,this.options.button!=null&&this.attachButton(this.options.button),this.options.enabled&&this.enable(),this.quill.addFormat("author",{class:"author-"}),this.options.authorId!=null&&(this.quill.on(this.quill.constructor.events.PRE_EVENT,function(e){return function(t,i,l){var h,u;if(t===e.quill.constructor.events.TEXT_CHANGE&&l==="user")return h=new d,u={author:e.options.authorId},o.each(i.ops,function(c){if(c.delete==null)return c.insert!=null||c.retain!=null&&c.attributes!=null?(c.attributes||(c.attributes={}),c.attributes.author=e.options.authorId,h.retain(c.retain||c.insert.length||1,u)):h.retain(c.retain)}),e.quill.updateContents(h,f.sources.SILENT)}}(this)),this.addAuthor(this.options.authorId,this.options.color))}return a.prototype.addAuthor=function(r,n){var e;return e={},e[".authorship .author-"+r]={"background-color":""+n},this.quill.addStyles(e)},a.prototype.attachButton=function(r){var n;return n=s(r),n.on("click",function(e){return function(){return n.toggleClass("ql-on"),e.enable($dom.hasClass("ql-on"))}}(this))},a.prototype.enable=function(r){return r==null&&(r=!0),s(this.quill.root).toggleClass("authorship",r)},a.prototype.disable=function(){return this.enable(!1)},a}(),f.registerModule("authorship",m),Y=m,Y}var X,St;function st(){if(St)return X;St=1;var m,d,f,s,o;return d=S(),m=C(),o=d.require("lodash"),s=d.require("dom"),f=function(){a.DEFAULTS={offset:10,styles:{".tooltip":{"background-color":"#fff",border:"1px solid #000",top:"0px","white-space":"nowrap","z-index":"2000"},".tooltip a":{cursor:"pointer","text-decoration":"none"}},template:""},a.HIDE_MARGIN="-10000px";function a(r,n){this.quill=r,this.options=n,this.quill.addStyles(this.options.styles),this.container=this.quill.addContainer("tooltip"),this.container.innerHTML=m.stripWhitespace(this.options.template),this.container.style.position="absolute",s(this.quill.root).on("focus",o.bind(this.hide,this)),this.hide(),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(e){return function(t,i){if(i==="user"&&e.container.style.left!==a.HIDE_MARGIN)return e.range=null,e.hide()}}(this))}return a.prototype.initTextbox=function(r,n,e){return s(r).on("keyup",function(t){return function(i){switch(i.which){case s.KEYS.ENTER:return n.call(t);case s.KEYS.ESCAPE:return e.call(t);default:return!0}}}(this))},a.prototype.hide=function(){return this.container.style.left=a.HIDE_MARGIN,this.range&&this.quill.setSelection(this.range),this.range=null},a.prototype.show=function(r){var n,e,t,i,l;return this.range=this.quill.getSelection(),i=this._position(r),n=i[0],e=i[1],l=this._limit(n,e),n=l[0],e=l[1],t=s(this.quill.root).window(),n+=t.pageXOffset,e+=t.pageYOffset,this.container.style.left=""+n+"px",this.container.style.top=""+e+"px",this.container.focus()},a.prototype._getBounds=function(){var r,n,e,t;return r=this.quill.root.getBoundingClientRect(),t=s(this.quill.root).window(),n=t.pageXOffset,e=t.pageYOffset,{left:r.left+n,right:r.right+n,top:r.top+e,bottom:r.bottom+e,width:r.width,height:r.height}},a.prototype._limit=function(r,n){var e,t;return e=this._getBounds(),t=this.container.getBoundingClientRect(),r=Math.min(e.right-t.width,r),r=Math.max(e.left,r),n=Math.min(e.bottom-t.height,n),n=Math.max(e.top,n),[r,n]},a.prototype._position=function(r){var n,e,t,i,l;return i=this.container.getBoundingClientRect(),n=this._getBounds(),r!=null?(t=r.getBoundingClientRect(),e=t.left+t.width/2-i.width/2,l=t.top+t.height+this.options.offset,l+i.height>n.bottom&&(l=t.top-i.height-this.options.offset)):(e=n.left+n.width/2-i.width/2,l=n.top+n.height/2-i.height/2),[e,l]},a}(),d.registerModule("tooltip",f),X=f,X}var V,Ct;function ce(){if(Ct)return V;Ct=1;var m,d,f,s,o,a={}.hasOwnProperty,r=function(n,e){for(var t in e)a.call(e,t)&&(n[t]=e[t]);function i(){this.constructor=n}return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};return d=S(),f=st(),o=d.require("lodash"),s=d.require("dom"),d.require("delta"),m=function(n){r(e,n),e.DEFAULTS={styles:{".image-tooltip-container":{margin:"25px",padding:"10px",width:"300px"},".image-tooltip-container:after":{clear:"both",content:'""',display:"table"},".image-tooltip-container .preview":{margin:"10px 0px",position:"relative",border:"1px dashed #000",height:"200px"},".image-tooltip-container .preview span":{display:"inline-block",position:"absolute","text-align":"center",top:"40%",width:"100%"},".image-tooltip-container img":{bottom:"0",left:"0",margin:"auto","max-height":"100%","max-width":"100%",position:"absolute",right:"0",top:"0"},".image-tooltip-container .input":{"box-sizing":"border-box",width:"100%"},".image-tooltip-container a":{border:"1px solid black","box-sizing":"border-box",display:"inline-block",float:"left",padding:"5px","text-align":"center",width:"50%"}},template:'<input class="input" type="textbox"> <div class="preview"> <span>Preview</span> </div> <a href="javascript:;" class="cancel">Cancel</a> <a href="javascript:;" class="insert">Insert</a>'};function e(t,i){this.quill=t,this.options=i,this.options.styles=o.defaults(this.options.styles,f.DEFAULTS.styles),this.options=o.defaults(this.options,f.DEFAULTS),e.__super__.constructor.call(this,this.quill,this.options),this.preview=this.container.querySelector(".preview"),this.textbox=this.container.querySelector(".input"),s(this.container).addClass("image-tooltip-container"),this.initListeners()}return e.prototype.initListeners=function(){return s(this.container.querySelector(".insert")).on("click",o.bind(this.insertImage,this)),s(this.container.querySelector(".cancel")).on("click",o.bind(this.hide,this)),s(this.textbox).on("input",o.bind(this._preview,this)),this.initTextbox(this.textbox,this.insertImage,this.hide),this.quill.onModuleLoad("toolbar",function(t){return function(i){return i.initFormat("image",o.bind(t._onToolbar,t))}}(this))},e.prototype.insertImage=function(){var t,i;return i=this._normalizeURL(this.textbox.value),this.range==null&&(this.range=new Range(0,0)),this.range&&(this.preview.innerHTML="<span>Preview</span>",this.textbox.value="",t=this.range.end,this.quill.insertEmbed(t,"image",i,"user"),this.quill.setSelection(t+1,t+1)),this.hide()},e.prototype._onToolbar=function(t,i){return i?(this.textbox.value||(this.textbox.value="http://"),this.show(),this.textbox.focus(),o.defer(function(l){return function(){return l.textbox.setSelectionRange(l.textbox.value.length,l.textbox.value.length)}}(this))):this.quill.deleteText(t,"user")},e.prototype._preview=function(){var t;if(this._matchImageURL(this.textbox.value))return this.preview.firstChild.tagName==="IMG"?this.preview.firstChild.setAttribute("src",this.textbox.value):(t=this.preview.ownerDocument.createElement("img"),t.setAttribute("src",this.textbox.value),this.preview.replaceChild(t,this.preview.firstChild))},e.prototype._matchImageURL=function(t){return/^https?:\/\/.+\.(jp?g|gif|png)$/.test(t)},e.prototype._normalizeURL=function(t){return/^https?:\/\//.test(t)||(t="http://"+t),t},e}(f),d.registerModule("image-tooltip",m),V=m,V}var W,Nt;function he(){if(Nt)return W;Nt=1;var m,d,f,s,o;return f=S(),o=f.require("lodash"),s=f.require("dom"),m=f.require("delta"),d=function(){a.hotkeys={BOLD:{key:"B",metaKey:!0},INDENT:{key:s.KEYS.TAB},ITALIC:{key:"I",metaKey:!0},OUTDENT:{key:s.KEYS.TAB,shiftKey:!0},UNDERLINE:{key:"U",metaKey:!0}};function a(r,n){this.quill=r,this.hotkeys={},this._initListeners(),this._initHotkeys(),this._initDeletes()}return a.prototype.addHotkey=function(r,n){return o.isArray(r)||(r=[r]),o.each(r,function(e){return function(t){var i,l;return t=o.isObject(t)?o.clone(t):{key:t},t.callback=n,i=o.isNumber(t.key)?t.key:t.key.toUpperCase().charCodeAt(0),(l=e.hotkeys)[i]==null&&(l[i]=[]),e.hotkeys[i].push(t)}}(this))},a.prototype.toggleFormat=function(r,n){var e,t,i;if(r.isCollapsed()?e=this.quill.getContents(Math.max(0,r.start-1),r.end):e=this.quill.getContents(r),i=e.ops.length===0||!o.all(e.ops,function(l){var h;return(h=l.attributes)!=null?h[n]:void 0}),r.isCollapsed()?this.quill.prepareFormat(n,i):this.quill.formatText(r,n,i,"user"),t=this.quill.getModule("toolbar"),t!=null)return t.setActive(n,i)},a.prototype._initDeletes=function(){return this.addHotkey([s.KEYS.DELETE,s.KEYS.BACKSPACE],function(r){return function(){return r.quill.getLength()>1}}(this))},a.prototype._initHotkeys=function(){return this.addHotkey(a.hotkeys.INDENT,function(r){return function(n){return r._onTab(n,!1),!1}}(this)),this.addHotkey(a.hotkeys.OUTDENT,function(r){return function(n){return!1}}()),o.each(["bold","italic","underline"],function(r){return function(n){return r.addHotkey(a.hotkeys[n.toUpperCase()],function(e){return r.toggleFormat(e,n),!1})}}(this))},a.prototype._initListeners=function(){return s(this.quill.root).on("keydown",function(r){return function(n){var e;return e=!1,o.each(r.hotkeys[n.which],function(t){var i;if(i=s.isMac()?n.metaKey:n.metaKey||n.ctrlKey,!!t.metaKey==!!i&&!!t.shiftKey==!!n.shiftKey&&!!t.altKey==!!n.altKey)return e=t.callback(r.quill.getSelection())===!1||e,!0}),!e}}(this))},a.prototype._onTab=function(r,n){var e;return e=new m().retain(r.start).insert("	").delete(r.end-r.start).retain(this.quill.getLength()-r.end),this.quill.updateContents(e),this.quill.setSelection(r.start+1,r.start+1)},a}(),f.registerModule("keyboard",d),W=d,W}var Q,qt;function fe(){if(qt)return Q;qt=1;var m,d,f,s,o,a={}.hasOwnProperty,r=function(n,e){for(var t in e)a.call(e,t)&&(n[t]=e[t]);function i(){this.constructor=n}return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};return d=S(),f=st(),o=d.require("lodash"),s=d.require("dom"),m=function(n){r(e,n),e.DEFAULTS={maxLength:50,styles:{".link-tooltip-container":{padding:"5px 10px"},".link-tooltip-container input.input":{width:"170px"},".link-tooltip-container input.input, .link-tooltip-container a.done, .link-tooltip-container.editing a.url, .link-tooltip-container.editing a.change":{display:"none"},".link-tooltip-container.editing input.input, .link-tooltip-container.editing a.done":{display:"inline-block"}},template:'<span class="title">Visit URL:&nbsp;</span> <a href="#" class="url" target="_blank" href="about:blank"></a> <input class="input" type="text"> <span>&nbsp;&#45;&nbsp;</span> <a href="javascript:;" class="change">Change</a> <a href="javascript:;" class="done">Done</a>'};function e(t,i){this.quill=t,this.options=i,this.options.styles=o.defaults(this.options.styles,f.DEFAULTS.styles),this.options=o.defaults(this.options,f.DEFAULTS),e.__super__.constructor.call(this,this.quill,this.options),s(this.container).addClass("link-tooltip-container"),this.textbox=this.container.querySelector(".input"),this.link=this.container.querySelector(".url"),this.initListeners()}return e.prototype.initListeners=function(){return this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(t){return function(i){var l;if(i!=null&&i.isCollapsed())return l=t._findAnchor(i),l?(t.setMode(l.href,!1),t.show(l)):(t.range=null,t.hide())}}(this)),s(this.container.querySelector(".done")).on("click",o.bind(this.saveLink,this)),s(this.container.querySelector(".change")).on("click",function(t){return function(){return t.setMode(t.link.href,!0)}}(this)),this.initTextbox(this.textbox,this.saveLink,this.hide),this.quill.onModuleLoad("toolbar",function(t){return function(i){return i.initFormat("link",o.bind(t._onToolbar,t))}}(this))},e.prototype.saveLink=function(){var t,i;return i=this._normalizeURL(this.textbox.value),this.range!=null&&(this.range.isCollapsed()?(t=this._findAnchor(this.range),t!=null&&(t.href=i)):this.quill.formatText(this.range,"link",i,"user")),this.setMode(i,!1)},e.prototype.setMode=function(t,i){var l;return i==null&&(i=!1),i?(this.textbox.value=t,o.defer(function(h){return function(){return h.textbox.focus(),h.textbox.setSelectionRange(t.length,t.length)}}(this))):(this.link.href=t,l=t.length>this.options.maxLength?t.slice(0,this.options.maxLength)+"...":t,s(this.link).text(l)),s(this.container).toggleClass("editing",i)},e.prototype._findAnchor=function(t){var i,l,h;for(h=this.quill.editor.doc.findLeafAt(t.start,!0),i=h[0],h[1],i!=null&&(l=i.node);l!=null;){if(l.tagName==="A")return l;l=l.parentNode}return null},e.prototype._onToolbar=function(t,i){var l;if(t&&!t.isCollapsed())return i?(this.setMode(this._suggestURL(t),!0),l=this.quill.editor.selection._getNativeRange(),this.show(l)):this.quill.formatText(t,"link",!1,"user")},e.prototype._normalizeURL=function(t){return/^(https?:\/\/|mailto:)/.test(t)||(t="http://"+t),t},e.prototype._suggestURL=function(t){var i;return i=this.quill.getText(t),this._normalizeURL(i)},e}(f),d.registerModule("link-tooltip",m),Q=m,Q}var $,wt;function pe(){if(wt)return $;wt=1;var m,d,f,s,o,a={}.hasOwnProperty,r=function(n,e){for(var t in e)a.call(e,t)&&(n[t]=e[t]);function i(){this.constructor=n}return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};return f=S(),m=Mt().EventEmitter2,o=f.require("lodash"),s=f.require("dom"),d=function(n){r(e,n),e.DEFAULTS={template:'<span class="cursor-flag"> <span class="cursor-name"></span> </span> <span class="cursor-caret"></span>',timeout:2500},e.events={CURSOR_ADDED:"cursor-addded",CURSOR_MOVED:"cursor-moved",CURSOR_REMOVED:"cursor-removed"};function e(t,i){this.quill=t,this.options=i,this.cursors={},this.container=this.quill.addContainer("cursor-container",!0),this.quill.addStyles({".cursor-container":{position:"absolute",left:"0",top:"0","z-index":"1000"},".cursor":{"margin-left":"-1px",position:"absolute"},".cursor-flag":{bottom:"100%",position:"absolute","white-space":"nowrap"},".cursor-name":{display:"inline-block",color:"white",padding:"2px 8px"},".cursor-caret":{height:"100%",position:"absolute",width:"2px"},".cursor.hidden .cursor-flag":{display:"none"},".cursor.top > .cursor-flag":{bottom:"auto",top:"100%"},".cursor.right > .cursor-flag":{right:"-2px"}}),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,o.bind(this._applyDelta,this))}return e.prototype.clearCursors=function(){return o.each(o.keys(this.cursors),o.bind(this.removeCursor,this)),this.cursors={}},e.prototype.moveCursor=function(t,i){var l;return l=this.cursors[t],l.index=i,s(l.elem).removeClass("hidden"),clearTimeout(l.timer),l.timer=setTimeout(function(h){return function(){return s(l.elem).addClass("hidden"),l.timer=null}}(),this.options.timeout),this._updateCursor(l),l},e.prototype.removeCursor=function(t){var i;return i=this.cursors[t],this.emit(e.events.CURSOR_REMOVED,i),i!=null&&i.elem.parentNode.removeChild(i.elem),delete this.cursors[t]},e.prototype.setCursor=function(t,i,l,h){var u;return this.cursors[t]==null&&(this.cursors[t]=u={userId:t,index:i,color:h,elem:this._buildCursor(l,h)},this.emit(e.events.CURSOR_ADDED,u)),o.defer(function(c){return function(){return c.moveCursor(t,i)}}(this)),this.cursors[t]},e.prototype.shiftCursors=function(t,i,l){return l==null&&(l=null),o.each(this.cursors,function(h){return function(u,c){if(u&&(u.index>t||u.userId===l))return u.index+=Math.max(i,t-u.index)}}())},e.prototype.update=function(){return o.each(this.cursors,function(t){return function(i,l){if(i!=null)return t._updateCursor(i),!0}}(this))},e.prototype._applyDelta=function(t){var i;return i=0,o.each(t.ops,function(l){return function(h){var u,c;return u=0,h.insert!=null?(u=h.insert.length||1,l.shiftCursors(i,u,(c=h.attributes)!=null?c.author:void 0)):h.delete!=null?l.shiftCursors(i,-1*h.delete,null):h.retain!=null&&(l.shiftCursors(i,0,null),u=h.retain),i+=u}}(this)),this.update()},e.prototype._buildCursor=function(t,i){var l,h,u;return l=this.container.ownerDocument.createElement("span"),s(l).addClass("cursor"),l.innerHTML=this.options.template,l.querySelector(".cursor-flag"),u=l.querySelector(".cursor-name"),s(u).text(t),h=l.querySelector(".cursor-caret"),h.style.backgroundColor=u.style.backgroundColor=i,this.container.appendChild(l),l},e.prototype._moveCursor=function(t,i,l){var h,u,c;return l==null&&(l="left"),c=s(i).window(),h=i.getBoundingClientRect(),t.elem.style.top=h.top+c.pageYOffset+"px",t.elem.style.left=h[l]+"px",t.elem.style.height=h.height+"px",u=t.elem.querySelector(".cursor-flag"),s(t.elem).toggleClass("top",parseInt(t.elem.style.top)<=u.offsetHeight).toggleClass("left",parseInt(t.elem.style.left)<=u.offsetWidth).toggleClass("right",this.quill.root.offsetWidth-parseInt(t.elem.style.left)<=u.offsetWidth),this.emit(e.events.CURSOR_MOVED,t)},e.prototype._updateCursor=function(t){var i,l,h,u,c,p,g;return this.quill.editor.checkUpdate(),p=this.quill.editor.doc.findLeafAt(t.index,!0),h=p[0],u=p[1],l=this.container.ownerDocument.createElement("span"),h!=null?(g=s(h.node).split(u),g[0],c=g[1],i=g[2],s(l).text(s.ZERO_WIDTH_NOBREAK_SPACE),h.node.parentNode.insertBefore(l,c)):(s(l).text(s.NOBREAK_SPACE),this.quill.root.appendChild(l)),this._moveCursor(t,l),s(l).remove(),i&&s(h.node.parentNode).normalize(),this.quill.editor.selection.update(f.sources.SILENT)},e}(m),f.registerModule("multi-cursor",d),$=d,$}var Z,Dt;function de(){if(Dt)return Z;Dt=1;var m,d,f,s,o,a;return s=S(),d=Bt(),a=s.require("lodash"),o=s.require("dom"),m=s.require("delta"),f=function(){function r(n,e){this.quill=n,this.options=e,this.container=this.quill.addContainer("paste-container"),this.container.setAttribute("contenteditable",!0),this.quill.addStyles({".paste-container":{left:"-10000px",position:"absolute",top:"50%"}}),o(this.quill.root).on("paste",a.bind(this._paste,this))}return r.prototype._paste=function(){var n,e,t,i,l;if(this.quill.getLength(),t=this.quill.getSelection(),t!=null)return this.container.innerHTML="",n=o(this.quill.root).window(),e=n.scrollY,i=window.scrollX,l=window.scrollY,this.container.focus(),a.defer(function(h){return function(){var u,c,p,g,y,v;return c=new d(h.container,h.quill.options),u=c.toDelta(),p=u.length()-1,u.compose(new m().retain(p).delete(1)),t.start>0&&u.ops.unshift({retain:t.start}),u.delete(t.end-t.start),h.quill.updateContents(u,"user"),h.quill.setSelection(t.start+p,t.start+p),v=h.quill.editor.doc.findLineAt(t.start+p),g=v[0],v[1],y=g.node.offsetTop+g.node.offsetHeight,y>e+h.quill.root.offsetHeight&&(e=g.node.offsetTop-h.quill.root.offsetHeight/2),n.scrollTo(0,e),window.scrollTo(i,l)}}(this))},r}(),s.registerModule("paste-manager",f),Z=f,Z}var J,It;function ge(){if(It)return J;It=1;var m,d,f,s;return m=S(),s=m.require("lodash"),f=m.require("dom"),d=function(){o.DEFAULTS={container:null},o.formats={LINE:{align:"align",bullet:"bullet",list:"list"},SELECT:{align:"align",background:"background",color:"color",font:"font",size:"size"},TOGGLE:{bold:"bold",bullet:"bullet",image:"image",italic:"italic",link:"link",list:"list",strike:"strike",underline:"underline"},TOOLTIP:{image:"image",link:"link"}};function o(a,r){if(this.quill=a,this.options=r,this.options.container==null)throw new Error("container required for toolbar",this.options);this.container=s.isString(this.options.container)?document.querySelector(this.options.container):this.options.container,this.inputs={},this.preventUpdate=!1,this.triggering=!1,s.each(this.quill.options.formats,function(n){return function(e){if(o.formats.TOOLTIP[e]==null)return n.initFormat(e,function(t,i){if(!n.triggering)return t.isCollapsed()?n.quill.prepareFormat(e,i):o.formats.LINE[e]!=null?n.quill.formatLine(t,e,i,"user"):n.quill.formatText(t,e,i,"user"),s.defer(function(){return n.updateActive(t,["bullet","list"]),n.setActive(e,i)})})}}(this)),this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(n){return function(e){if(e!=null)return n.updateActive(e)}}(this)),this.quill.onModuleLoad("keyboard",function(n){return function(e){return e.addHotkey([f.KEYS.BACKSPACE,f.KEYS.DELETE,f.KEYS.ENTER],function(){return s.defer(s.bind(n.updateActive,n))})}}(this)),f(this.container).addClass("ql-toolbar-container"),f.isIOS()&&f(this.container).addClass("ios"),f.isIE(11)&&f(this.container).on("mousedown",function(n){return function(){return!1}}())}return o.prototype.initFormat=function(a,r){var n,e,t;if(t=".ql-"+a,o.formats.SELECT[a]!=null?(t="select"+t,n="change"):n="click",e=this.container.querySelector(t),e!=null)return this.inputs[a]=e,f(e).on(n,function(i){return function(){var l,h;return h=n==="change"?f(e).value():!f(e).hasClass("ql-active"),i.preventUpdate=!0,i.quill.focus(),l=i.quill.getSelection(),l!=null&&r(l,h),i.preventUpdate=!1,!0}}(this))},o.prototype.setActive=function(a,r){var n,e,t,i;if(e=this.inputs[a],e!=null)return n=f(e),e.tagName==="SELECT"?(this.triggering=!0,t=n.value(e),r==null&&(r=(i=n.default())!=null?i.value:void 0),s.isArray(r)&&(r=""),r!==t&&(r!=null?n.option(r,!1):n.reset(!1)),this.triggering=!1):n.toggleClass("ql-active",r||!1)},o.prototype.updateActive=function(a,r){var n;if(r==null&&(r=null),a||(a=this.quill.getSelection()),a!=null&&!this.preventUpdate)return n=this._getActive(a),s.each(this.inputs,function(e){return function(t,i){return(!s.isArray(r)||r.indexOf(i)>-1)&&e.setActive(i,n[i]),!0}}(this))},o.prototype._getActive=function(a){var r,n;return r=this._getLeafActive(a),n=this._getLineActive(a),s.defaults({},r,n)},o.prototype._getLeafActive=function(a){var r,n,e,t;return a.isCollapsed()?(t=this.quill.editor.doc.findLineAt(a.start),t[0],e=t[1],e===0?r=this.quill.getContents(a.start,a.end+1):r=this.quill.getContents(a.start-1,a.end)):r=this.quill.getContents(a),n=s.map(r.ops,"attributes"),this._intersectFormats(n)},o.prototype._getLineActive=function(a){var r,n,e,t,i;for(n=[],t=this.quill.editor.doc.findLineAt(a.start),r=t[0],t[1],i=this.quill.editor.doc.findLineAt(a.end),e=i[0],i[1],e!=null&&e===r&&(e=e.next);r!=null&&r!==e;)n.push(s.clone(r.formats)),r=r.next;return this._intersectFormats(n)},o.prototype._intersectFormats=function(a){return s.reduce(a.slice(1),function(r,n){var e,t,i,l,h;return e=s.keys(r),i=s.keys(n),l=s.intersection(e,i),h=s.difference(e,i),t=s.difference(i,e),s.each(l,function(u){if(o.formats.SELECT[u]!=null){if(s.isArray(r[u])){if(s.indexOf(r[u],n[u])<0)return r[u].push(n[u])}else if(r[u]!==n[u])return r[u]=[r[u],n[u]]}}),s.each(h,function(u){if(o.formats.TOGGLE[u]!=null)return delete r[u];if(o.formats.SELECT[u]!=null&&!s.isArray(r[u]))return r[u]=[r[u]]}),s.each(t,function(u){if(o.formats.SELECT[u]!=null)return r[u]=[n[u]]}),r},a[0]||{})},o}(),m.registerModule("toolbar",d),J=d,J}var tt,kt;function me(){if(kt)return tt;kt=1;var m,d,f;return m=S(),f=m.require("lodash"),m.require("delta"),d=function(){s.DEFAULTS={delay:1e3,maxStack:100},s.hotkeys={UNDO:{key:"Z",metaKey:!0},REDO:{key:"Z",metaKey:!0,shiftKey:!0}};function s(o,a){this.quill=o,this.options=a??{},this.lastRecorded=0,this.emittedDelta=null,this.clear(),this.initListeners()}return s.prototype.initListeners=function(){return this.quill.onModuleLoad("keyboard",function(o){return function(a){return a.addHotkey(s.hotkeys.UNDO,function(){return o.undo(),!1}),a.addHotkey(s.hotkeys.REDO,function(){return o.redo(),!1})}}(this)),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(o){return function(a,r){if(!f.isEqual(a,o.emittedDelta))return o.record(a,o.oldDelta),o.oldDelta=o.quill.getContents()}}(this))},s.prototype.clear=function(){return this.stack={undo:[],redo:[]},this.oldDelta=this.quill.getContents()},s.prototype.record=function(o,a){var r,n,e;if(o.ops.length>0){this.stack.redo=[];try{if(e=this.quill.getContents().diff(this.oldDelta),n=new Date().getTime(),this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0?(r=this.stack.undo.pop(),e=e.compose(r.undo),o=r.redo.compose(o)):this.lastRecorded=n,this.stack.undo.push({redo:o,undo:e}),this.stack.undo.length>this.options.maxStack)return this.stack.undo.unshift()}catch{return this.clear()}}},s.prototype.redo=function(){return this._change("redo","undo")},s.prototype.undo=function(){return this._change("undo","redo")},s.prototype._getLastChangeIndex=function(o){var a,r;return r=0,a=0,o.ops.forEach(function(n){if(n.insert!=null)return r=Math.max(a+(n.insert.length||1),r);if(n.delete!=null)return r=Math.max(a,r);if(n.retain!=null)return n.attributes!=null&&(r=Math.max(a+n.retain,r)),a+=n.retain}),r},s.prototype._change=function(o,a){var r,n;if(this.stack[o].length>0)return r=this.stack[o].pop(),this.lastRecorded=0,this.emittedDelta=r[o],this.quill.updateContents(r[o],"user"),this.emittedDelta=null,n=this._getLastChangeIndex(r[o]),this.quill.setSelection(n,n),this.oldDelta=this.quill.getContents(),this.stack[a].push(r)},s}(),m.registerModule("undo-manager",d),tt=d,tt}var et,Rt;function ye(){return Rt||(Rt=1,ae(),ce(),he(),fe(),pe(),de(),ge(),st(),me(),et=S()),et}var it,Ot;function be(){return Ot||(Ot=1,it=ye()),it}export{be as r};
